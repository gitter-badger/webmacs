!function(){function DlGridCellModel(t){arguments.length>0&&(DlEventProxy.call(this),"object"!=typeof t&&(t={value:t}),DlGridCellModel.setDefaults(this,t),this.registerEvents(DEFAULT_EVENTS))}DlGridCellModel.inherits(DlEventProxy),eval(Dynarch.EXPORT("DlGridCellModel"));var DEFAULT_EVENTS=["onChange"];D.DEFAULT_ARGS={_value:["value",null],_style:["style",{}]},P.setValue=function(t){var e=this._value;this._value=t,this.applyHooks("onChange",[this,"value",t,e])},P.getContent=function(){return this._value},P.getStyle=function(t,e){return t in this._style?this._style[t]:e},P.getIndex=function(){return this.index},P.getId=function(){return this.model.getColByIndex(this.index).id},P.setStyle=function(t,e){var n=this._style[t];this._style[t]=e,this.applyHooks("onChange",[this,"style",e,n,t])},P.compareTo=function(t){return this._value<t._value?-1:this._value>t._value?1:0}}(),function(){function DlGridColModel(args){arguments.length>0&&(DlEventProxy.call(this),DlGridColModel.setDefaults(this,args),this.registerEvents(DEFAULT_EVENTS),"string"==typeof this._cellType&&(this._cellType=eval(this._cellType)))}DlGridColModel.inherits(DlEventProxy),eval(Dynarch.EXPORT("DlGridColModel"));var DEFAULT_EVENTS=["onChange"];D.DEFAULT_ARGS={width:["width",null],fill:["fill",!1],_label:["label",null],id:["id",null],_cellType:["cellType",DlGridCellModel],isResizable:["resizable",!1],isScrollable:["scrollable",!0],isSortable:["sortable",!0],tooltip:["tooltip",null],_style:["style",{}],_iconClass:["iconClass",null]},P.getId=function(){return this.id},P.getIndex=function(){return this.index},P.getIconClass=function(){return this._iconClass},P.setIconClass=function(t){var e=this._iconClass;this._iconClass=t,this.applyHooks("onChange",[this,"iconClass",val,e])},P.getLabel=function(){return this._label},P.setLabel=function(t){var e=this._label;this._label=t,this.applyHooks("onChange",[this,"label",val,e])},P.getCellType=function(){return this._cellType},P.createCell=function(t){var e=new this._cellType(t);return e},P.getStyle=function(t,e){return t in this._style?this._style[t]:e},P.setStyle=function(t,e){var n=this._style[t];this._style[t]=e,this.applyHooks("onChange",[this,"style",e,n,t])},P.sort=function(){this.model.sort(this)},P.compareRows=function(t,e){var n=this.getIndex();return t=t.getCellByIndex(n),e=e.getCellByIndex(n),t.compareTo(e)}}(),function(){function DlGridRowModel(t){if(arguments.length>0){if(t instanceof Array){var e={id:t.id,model:t.model,cells:{}};t.model.foreachCol(function(n,o){e.cells[n.getId()]=t[o]}),t=e}DlEventProxy.call(this),D.setDefaults(this,t),this.registerEvents(DEFAULT_EVENTS),this._init()}}DlGridRowModel.inherits(DlEventProxy),eval(Dynarch.EXPORT("DlGridRowModel"));var DEFAULT_EVENTS=["onChange"];D.DEFAULT_ARGS={id:["id",null],userData:["data",null],_cells:["cells",null],_model:["model",null],tooltip:["tooltip",null]},P.reset=function(t){this.id=t.id,this.userData=t.data,this.tooltip=t.tooltip,this.foreachCell(function(e,n){e.setValue(t.cells[n.getId()])})},P.getId=function(){return this.id},P.getIndex=function(){return this.index},P.getCells=function(){return this._cells},P.getCellByIndex=function(t){return this._cells[this.model.getColByIndex(t).getId()]},P.foreachCell=function(t,e){this.model.foreachCol(function(n,o){var s=this._cells[n.getId()];t.apply(e,[s,n,o])},this)},P._onCellChange=function(t,e,n,o){this.applyHooks("onChange",[this,t,e,n,o])},P._init=function(){var t=this._model,e=this._cells;this.model=t,delete this._model;var n=this._onCellChange.$(this);for(var o in e){var s=e[o],l=t.getColById(o);s=e[o]=l.createCell(s),s.model=t,s.colId=o,s.index=l.getIndex(),s.parent=this,s.addEventListener("onChange",n)}}}(),function(){function DlGridModel(t){arguments.length>0&&(DlEventProxy.call(this),DlGridModel.setDefaults(this,t),this.registerEvents(DEFAULT_EVENTS),this._init())}DlGridModel.inherits(DlEventProxy),eval(Dynarch.EXPORT("DlGridModel"));var DEFAULT_EVENTS=["onInsertRow","onDeleteRow","onInsertCol","onInsertCol","onMoveRow","onMoveCol","onRowChange","onColChange","onSort"];D.DEFAULT_ARGS={_rows:["rows",[]],_cols:["cols",null]},P.getRowById=function(t){return this._rowsById[t]},P.getRowByIndex=function(t){return this._rows[t]},P.foreachRow=function(){return this._rows.foreach.apply(this._rows,arguments)},P.foreachCol=function(){return this._cols.foreach.apply(this._cols,arguments)},P.getColById=function(t){return this._colsById[t]},P.getColByIndex=function(t){return this._cols[t]},P._init=function(){this.__sortCol=null,this.__sortDesc=!1;var t=this._colsById={},e=this._rowsById={};this._onRowChange=this._onColChange.$(this),this._onRowChange=this._onRowChange.$(this),this._cols.r_assign_each(function(e,n){return n=new DlGridColModel(n),n.model=this,n.index=e,n.addEventListener("onChange",this._onColChange),n.id&&(t[n.id]=n),n},this),this._rows.r_assign_each(function(t,n){return n.model=this,n=new DlGridRowModel(n),n.index=t,n.addEventListener("onChange",this._onRowChange),n.id&&(e[n.id]=n),n},this)},P._onColChange=function(t,e,n,o){this.applyHooks("onColChange",[this,t,e,n,o])},P._onRowChange=function(t,e,n,o,s){this.applyHooks("onRowChange",[this,t,e,n,o,s])},P._getInsertPos=function(t){var e=this.__sortCol;return this._rows.foreach(function(n,o){var s=e.compareRows(n,t);this.__sortDesc&&(s=-s),s>=0&&$RETURN(o)},this)},P.insertRow=function(t,e){t.model=this,t=new DlGridRowModel(t);var n=this._rows,o=n.length;(null==e||-1==e)&&(e=this.__sortCol?this._getInsertPos(t):o),n.splice(e,0,t),++o;for(var s=e;o>s;++s)n[s].index=s;return t.addEventListener("onChange",this._onRowChange),t.id&&(this._rowsById[t.id]=t),this.applyHooks("onInsertRow",[t]),t},P.deleteRowById=function(t){this.deleteRowByIndex(this.getRowById(t).getIndex())},P.deleteRowByIndex=function(t){var e=this._rows,n=e[t];n.id&&delete this._rowsById[n.id],e.splice(t,1);for(var o=t;o<e.length;++o)e[o].index=o;return n.removeEventListener("onChange",this._onRowChange),this.applyHooks("onDeleteRow",[n]),n.destroy(),n},P.setValues=function(t){for(this.__sortDesc=!1,this.applyHooks("onSort",[null,this.__sortCol]),t.foreach(function(t,e){t instanceof Array&&(t={cells:t});var n=this.getRowByIndex(e);n?(n.id&&delete this._rowsById[n.id],t.id&&(this._rowsById[t.id]=n),n.reset(t)):this.insertRow(t,this._rows.length)},this);t.length<this._rows.length;)this.deleteRowByIndex(this._rows.length-1)},P.sort=function(t){var e=this.__sortCol;e===t?this.__sortDesc=!this.__sortDesc:this.__sortDesc=!1,this.__sortCol=t;t.getIndex();this._rows=this._rows.mergeSort(function(e,n){return t.compareRows(e,n)},this.__sortDesc);var n=this._rows.map(function(t,e){var n=t.index;return t.index=e,n});this.applyHooks("onSort",[t,e,this.__sortDesc,n])}}();